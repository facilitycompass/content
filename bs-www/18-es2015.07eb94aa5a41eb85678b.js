(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{W9vR:function(l,n,u){"use strict";u.r(n);var t=u("8Y7J");class i{}var e=u("pMnS"),o=u("oBZk"),s=u("ZZ/e"),r=u("SVse"),b=u("mrSG"),c=u("yTNM"),p=u("j+vm"),a=u("OaAi");class h{constructor(l,n,u,t){this.api=l,this.itemUtils=n,this.actionSheetController=u,this.utils=t,this.items=[],this.history=[],this.loading=!0,this.slideOpts={initialSlide:1,slidesPerView:3,spaceBetween:20}}ngOnInit(){}onClick(l){this.api.get("items",{id:l.itemId}).subscribe(l=>{var n=l.items[0];n&&this.itemUtils.onClick(n)})}onClickHistoryItem(l){this.api.get("items",{id:l.i}).subscribe(l=>{var n=l.items[0];n&&this.itemUtils.onClick(n)})}ionViewDidEnter(){this.refresh()}delete(l){l&&this.api.post("my-items/save",{userId:1,itemId:l.itemId,action:2}).subscribe(n=>{this.items.splice(this.items.indexOf(l),1)})}refresh(){this.api.get("my-items",{pageSize:20,pageIndex:0}).subscribe(l=>{this.items=l.items,this.loading=!1});let l=window.localStorage;this.history=[],setTimeout(()=>{this.history=JSON.parse(l.getItem("history"))||[]})}presentActionSheet(){return b.b(this,void 0,void 0,(function*(){const l=[];this.api.isLoggedIn()?l.push({text:"Sign out",role:"destructive",handler:()=>{this.api.logOut(),this.refresh()}}):l.push({text:"Sign in",handler:()=>{this.utils.ensureLogin().then(l=>{this.refresh()})}}),l.push({text:"Clear all data",role:"destructive",handler:()=>{window.localStorage.removeItem("history"),this.utils.deleteAllCache(),this.refresh()}});const n=yield this.actionSheetController.create({buttons:l});yield n.present()}))}}var d=t.ob({encapsulation:0,styles:[[""]],data:{}});function m(l){return t.Hb(0,[(l()(),t.qb(0,0,null,null,1,"h3",[["style","padding-left:20px;"]],null,null,null,null,null)),(l()(),t.Gb(-1,null,["History"]))],null,null)}function f(l){return t.Hb(0,[(l()(),t.qb(0,0,null,null,0,"img",[],[[8,"src",4]],null,null,null,null))],null,(function(l,n){l(n,0,0,t.ub(1,"",n.parent.context.$implicit.p,""))}))}function g(l){return t.Hb(0,[(l()(),t.qb(0,0,null,null,3,"ion-slide",[],null,[[null,"click"]],(function(l,n,u){var t=!0;return"click"===n&&(t=!1!==l.component.onClickHistoryItem(l.context.$implicit)&&t),t}),o.bb,o.w)),t.pb(1,49152,null,0,s.rb,[t.h,t.k,t.x],null,null),(l()(),t.fb(16777216,null,0,1,null,f)),t.pb(3,16384,null,0,r.i,[t.L,t.I],{ngIf:[0,"ngIf"]},null)],(function(l,n){l(n,3,0,n.context.$implicit.p)}),null)}function x(l){return t.Hb(0,[(l()(),t.qb(0,0,null,null,1,"h3",[["style","padding-left:20px;padding-top:20px;"]],null,null,null,null,null)),(l()(),t.Gb(-1,null,["Saved Items"]))],null,null)}function k(l){return t.Hb(0,[(l()(),t.qb(0,0,null,null,0,"img",[["style","max-width:25%; margin-right:6px;"]],[[8,"src",4]],null,null,null,null))],null,(function(l,n){l(n,0,0,t.ub(1,"",n.parent.context.$implicit.thumbnailUrl,""))}))}function I(l){return t.Hb(0,[(l()(),t.qb(0,0,null,null,12,"ion-item-sliding",[],null,null,null,o.T,o.p)),t.pb(1,49152,null,0,s.N,[t.h,t.k,t.x],null,null),(l()(),t.qb(2,0,null,0,5,"ion-item",[["detail",""]],null,[[null,"click"]],(function(l,n,u){var t=!0;return"click"===n&&(t=!1!==l.component.onClick(l.context.$implicit)&&t),t}),o.U,o.m)),t.pb(3,49152,null,0,s.I,[t.h,t.k,t.x],{detail:[0,"detail"]},null),(l()(),t.fb(16777216,null,0,1,null,k)),t.pb(5,16384,null,0,r.i,[t.L,t.I],{ngIf:[0,"ngIf"]},null),(l()(),t.qb(6,0,null,0,1,"p",[],null,null,null,null,null)),(l()(),t.Gb(7,null,["",""])),(l()(),t.qb(8,0,null,0,4,"ion-item-options",[["side","end"]],null,null,null,o.S,o.o)),t.pb(9,49152,null,0,s.M,[t.h,t.k,t.x],{side:[0,"side"]},null),(l()(),t.qb(10,0,null,0,2,"ion-item-option",[["color","danger"]],null,[[null,"click"]],(function(l,n,u){var t=!0;return"click"===n&&(t=!1!==l.component.delete(l.context.$implicit)&&t),t}),o.R,o.n)),t.pb(11,49152,null,0,s.L,[t.h,t.k,t.x],{color:[0,"color"]},null),(l()(),t.Gb(-1,0,["Delete"]))],(function(l,n){l(n,3,0,""),l(n,5,0,n.context.$implicit.thumbnailUrl),l(n,9,0,"end"),l(n,11,0,"danger")}),(function(l,n){l(n,7,0,n.context.$implicit.title)}))}function q(l){return t.Hb(0,[(l()(),t.qb(0,0,null,null,1,"ion-spinner",[],null,null,null,o.db,o.y)),t.pb(1,49152,null,0,s.tb,[t.h,t.k,t.x],null,null)],null,null)}function v(l){return t.Hb(0,[(l()(),t.qb(0,0,null,null,12,"ion-header",[],null,null,null,o.N,o.i)),t.pb(1,49152,null,0,s.C,[t.h,t.k,t.x],null,null),(l()(),t.qb(2,0,null,0,10,"ion-toolbar",[],null,null,null,o.jb,o.E)),t.pb(3,49152,null,0,s.Db,[t.h,t.k,t.x],null,null),(l()(),t.qb(4,0,null,0,2,"ion-title",[],null,null,null,o.ib,o.D)),t.pb(5,49152,null,0,s.Bb,[t.h,t.k,t.x],null,null),(l()(),t.Gb(-1,0,[" My Activity "])),(l()(),t.qb(7,0,null,0,5,"ion-buttons",[["slot","end"]],null,null,null,o.I,o.d)),t.pb(8,49152,null,0,s.m,[t.h,t.k,t.x],null,null),(l()(),t.qb(9,0,null,0,3,"ion-button",[],null,[[null,"click"]],(function(l,n,u){var t=!0;return"click"===n&&(t=!1!==l.component.presentActionSheet()&&t),t}),o.H,o.c)),t.pb(10,49152,null,0,s.l,[t.h,t.k,t.x],null,null),(l()(),t.qb(11,0,null,0,1,"ion-icon",[["name","more"],["slot","icon-only"]],null,null,null,o.O,o.j)),t.pb(12,49152,null,0,s.D,[t.h,t.k,t.x],{name:[0,"name"]},null),(l()(),t.qb(13,0,null,null,15,"ion-content",[],null,null,null,o.L,o.g)),t.pb(14,49152,null,0,s.v,[t.h,t.k,t.x],null,null),(l()(),t.fb(16777216,null,0,1,null,m)),t.pb(16,16384,null,0,r.i,[t.L,t.I],{ngIf:[0,"ngIf"]},null),(l()(),t.qb(17,0,null,0,3,"ion-slides",[["pager","true"]],null,null,null,o.cb,o.x)),t.pb(18,49152,null,0,s.sb,[t.h,t.k,t.x],{options:[0,"options"],pager:[1,"pager"]},null),(l()(),t.fb(16777216,null,0,1,null,g)),t.pb(20,278528,null,0,r.h,[t.L,t.I,t.q],{ngForOf:[0,"ngForOf"]},null),(l()(),t.fb(16777216,null,0,1,null,x)),t.pb(22,16384,null,0,r.i,[t.L,t.I],{ngIf:[0,"ngIf"]},null),(l()(),t.qb(23,0,null,0,3,"ion-list",[],null,null,null,o.W,o.r)),t.pb(24,49152,null,0,s.P,[t.h,t.k,t.x],null,null),(l()(),t.fb(16777216,null,0,1,null,I)),t.pb(26,278528,null,0,r.h,[t.L,t.I,t.q],{ngForOf:[0,"ngForOf"]},null),(l()(),t.fb(16777216,null,0,1,null,q)),t.pb(28,16384,null,0,r.i,[t.L,t.I],{ngIf:[0,"ngIf"]},null)],(function(l,n){var u=n.component;l(n,12,0,"more"),l(n,16,0,u.history.length>0),l(n,18,0,u.slideOpts,"true"),l(n,20,0,u.history),l(n,22,0,u.items.length>0),l(n,26,0,u.items),l(n,28,0,u.loading)}),null)}function y(l){return t.Hb(0,[(l()(),t.qb(0,0,null,null,1,"app-tab3",[],null,null,null,v,d)),t.pb(1,114688,null,0,h,[c.a,p.a,s.a,a.a],null,null)],(function(l,n){l(n,1,0)}),null)}var A=t.mb("app-tab3",h,y,{},{},[]),S=u("s7LF"),w=u("iInd");u.d(n,"Tab3PageModuleNgFactory",(function(){return H}));var H=t.nb(i,[],(function(l){return t.zb([t.Ab(512,t.j,t.Y,[[8,[e.a,A]],[3,t.j],t.v]),t.Ab(4608,r.k,r.j,[t.s,[2,r.q]]),t.Ab(4608,s.c,s.c,[t.x,t.g]),t.Ab(4608,s.Hb,s.Hb,[s.c,t.j,t.p]),t.Ab(4608,s.Kb,s.Kb,[s.c,t.j,t.p]),t.Ab(4608,S.d,S.d,[]),t.Ab(1073742336,r.b,r.b,[]),t.Ab(1073742336,s.Fb,s.Fb,[]),t.Ab(1073742336,S.c,S.c,[]),t.Ab(1073742336,S.a,S.a,[]),t.Ab(1073742336,w.n,w.n,[[2,w.s],[2,w.m]]),t.Ab(1073742336,i,i,[]),t.Ab(1024,w.k,(function(){return[[{path:"",component:h}]]}),[])])}))}}]);